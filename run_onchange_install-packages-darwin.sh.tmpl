#!/usr/bin/env bash
# run_onchange_install-packages-darwin.sh.tmpl
# This script runs whenever dot_Brewfile changes.
# dot_Brewfile is rendered by chezmoi as ~/.Brewfile.

# Hash: {{ include "dot_Brewfile" | sha256sum }}
set -euo pipefail

echo "üì¶ Installing/updating packages from Brewfile..."

if ! command -v brew &> /dev/null; then
    echo "‚ùå Homebrew is not installed. Please run install.sh first."
    exit 1
fi

# Run brew bundle from home directory where .Brewfile is located
cd "$HOME"

if [ -f "$HOME/.Brewfile" ]; then
    echo "üìã Found Brewfile at $HOME/.Brewfile"
    brew bundle --global --verbose
    echo "‚úÖ Packages installed/updated successfully!"
else
    echo "‚ö†Ô∏è  No Brewfile found at $HOME/.Brewfile"
    exit 1
fi
